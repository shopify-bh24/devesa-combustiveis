{{ 'section-station-info.css' | asset_url | stylesheet_tag }}

{%- style -%}
  #StationInfo-{{ section.id }} {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }
{%- endstyle -%}

<section id="StationInfo-{{ section.id }}" class="station-info">
  <div class="page-width station-wrapper">

    <div class="station-left">
      {% if section.settings.title != blank %}
        <h2 class="station-heading">{{ section.settings.title }}</h2>
      {% endif %}

      <div class="station-products">
        {% for block in section.blocks %}
          {% if block.type == 'product' %}
            <div class="product-item">
              {% if block.settings.icon != blank %}
                <img src="{{ block.settings.icon | img_url: '100x' }}" width="auto" height="auto" alt="{{ block.settings.title | escape }}">
              {% endif %}
              {% if block.settings.title != blank %}
                <span class="product-name">{{ block.settings.title }}</span>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {% if section.settings.content != blank %}
        <div class="station-services rte">
          {{ section.settings.content }}
        </div>
      {% endif %}
    </div>

    <div class="station-right">
      {% if section.settings.station_image != blank %}
        <div class="station-image">
          <img
            src="{{ section.settings.station_image | img_url: '400x' }}"
            width="auto"
            height="auto"
            alt="Station Image"
            loading="lazy"
          >
        </div>
      {% endif %}

      {%- assign station_info = page.metafields.custom.custom_station.value -%}

      <div class="station-details__bottom">
        <div class="station-details">
          {% if station_info.address != blank %}
            <div class="station-detail">
              <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.1 2 5 5.1 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.1 15.9 2 12 2ZM12 11.5C10.6 11.5 9.5 10.4 9.5 9C9.5 7.6 10.6 6.5 12 6.5C13.4 6.5 14.5 7.6 14.5 9C14.5 10.4 13.4 11.5 12 11.5Z" fill="#E74C3C"/>
              </svg>
              <p>{{ station_info.address }}</p>
            </div>
          {% endif %}

          {% if station_info.phone != blank %}
            <div class="station-detail">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.6 10.8C8.2 14.1 10.9 16.8 14.2 18.4L16.3 16.3C16.5 16.1 16.8 16 17.1 16C17.2 16 17.3 16 17.5 16C19.2 16.4 20.9 16.7 22.6 17.1C22.8 17.1 23 17.3 23 17.6V21C23 21.6 22.6 22 22 22C10.4 22 2 13.6 2 2C2 1.4 2.4 1 3 1H6.5C6.8 1 7 1.2 7 1.4C7.3 3.1 7.6 4.8 8 6.5C8 6.7 8 6.8 7.9 7C7.9 7.3 7.8 7.6 7.6 7.8L5.7 9.7C6 10.1 6.3 10.5 6.6 10.8Z" fill="#E74C3C"/>
              </svg>
              <p>{{ station_info.phone }}</p>
            </div>
          {% endif %}
        </div>

        {% if station_info.map_link != blank %}
          <a href="{{ station_info.map_link }}" class="station-button">
            {{ station_info.featured_cta | default: "Como chegar" }}
          </a>
        {% endif %}
      </div>
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Station Info Section",
  "tag": "section",
  "class": "station-info",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Produtos"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "image_picker",
      "id": "station_image",
      "label": "Station Image"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Product Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Product Name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Station Info Section",
      "blocks": [
        { "type": "product" },
        { "type": "product" }
      ]
    }
  ]
}
{% endschema %}
