{% comment %}
  Renders a gas bottle product card with custom styling
  
  Accepts:
  - product: {Object} Product Liquid object
  - lazy_load: {Boolean} Image should be lazy loaded. Default: true (optional)
  
  Usage:
  {% render 'gas-bottle-card', product: product, lazy_load: true %}
{% endcomment %}

{%- liquid
  assign lazy_load = lazy_load | default: true
-%}

<div class="gas-bottle-card">
  <div class="gas-bottle-card__image">
    {%- if product and product.featured_media -%}
      <img
        srcset="
          {%- if product.featured_media.width >= 165 -%}{{ product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
          {%- if product.featured_media.width >= 360 -%}{{ product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
          {%- if product.featured_media.width >= 533 -%}{{ product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
          {%- if product.featured_media.width >= 720 -%}{{ product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
          {%- if product.featured_media.width >= 940 -%}{{ product.featured_media | image_url: width: 940 }} 940w,{%- endif -%}
          {%- if product.featured_media.width >= 1066 -%}{{ product.featured_media | image_url: width: 1066 }} 1066w,{%- endif -%}
          {{ product.featured_media | image_url }} {{ product.featured_media.width }}w
        "
        src="{{ product.featured_media | image_url: width: 533 }}"
        sizes="(min-width: 990px) calc((100vw - 130px) / 3), (min-width: 750px) calc((100vw - 120px) / 2), calc((100vw - 35px) / 1)"
        alt="{{ product.featured_media.alt | escape }}"
        class="motion-reduce"
        loading="{% if lazy_load %}lazy{% else %}eager{% endif %}"
        width="{{ product.featured_media.width }}"
        height="{{ product.featured_media.height }}"
      >
    {%- else -%}
      {{ 'product-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
    {%- endif -%}
  </div>

  <div class="gas-bottle-card__content">
    <h3 class="gas-bottle-card__title">
      {%- if product and product.url -%}
        <a href="{{ product.url }}" class="full-unstyled-link">
          {{ product.title | escape }}
        </a>
      {%- else -%}
        <a role="link" aria-disabled="true" class="full-unstyled-link">
          {{ 'onboarding.product_title' | t }}
        </a>
      {%- endif -%}
    </h3>

    {%- if product and product.description != blank -%}
      <p class="gas-bottle-card__description">{{ product.description | strip_html | truncate: 120 }}</p>
    {%- else -%}
      <p class="gas-bottle-card__description">{{ 'onboarding.product_description' | t }}</p>
    {%- endif -%}

    {%- if product and product.metafields.custom.use_cases != blank -%}
      <div class="gas-bottle-card__use-cases">
        <h4 class="gas-bottle-card__use-cases-title">Types of use</h4>
        <ul class="gas-bottle-card__use-cases-list">
          {%- assign use_cases = product.metafields.custom.use_cases | split: ',' -%}
          {%- for use_case in use_cases -%}
            <li class="gas-bottle-card__use-case">
              <svg class="gas-bottle-card__check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
              </svg>
              {{ use_case | strip }}
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}

    {%- if product and product.url -%}
      <a href="{{ product.url }}" class="gas-bottle-card__button button button--primary">
        View product
      </a>
    {%- else -%}
      <a href="#" class="gas-bottle-card__button button button--primary">
        View product
      </a>
    {%- endif -%}
  </div>
</div>
